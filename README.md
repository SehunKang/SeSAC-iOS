# SeSAC_MyMemoApp

https://user-images.githubusercontent.com/79244795/141435147-31557805-e6c4-41df-9d0e-ddf96ae1f6fd.mov

https://user-images.githubusercontent.com/79244795/141435176-10b1d5cf-f70b-4e05-972f-24361770c238.mov


# 프로젝트 복기

## 가장 헤멨던 구간들을 생각나는데로 정리해본다

### 테이블뷰의 모서리를 둥글게 만드는 작업
진짜 별거 아닌데.. cornerRadius를 조절하는식으로 접근하는데 아무리 해도 내가 원하는데로 안되었는데 스토리보드 인스펙터에서 inset Grouped 하니 한방에 해결..

### 메모를 고정했을때 테이블뷰에서 꼬이는 현상
이것도 별거 아닌데 생각없이 indexPath.row를 데이터베이스의 인덱스로 사용하니 0번섹션에서 고정을 해제하면 1번섹션의 메모가 고정되는식으로 꼬였는데 셀을 조건문으로 섹션을 나누는 방법으로 금방 해결했다.

### 메모를 작성하는 구간에서 메모앱처럼 타이틀부분, 텍스트부분 나눠주는 작업
이번 과제의 핵심중 하나라고 생각한다. 메모를 작성하면서 개행문자를 만나기 전의 스트링(즉 첫줄)을 크게 만들어주고 그 후의 스트링을 노말하게 만들어주고 각각의 데이터를 데이터베이스에 따로 저장해주는 작업이다.
열심히 구글링 해서 NSString, NSRange 같은 나에게 생소한 클래스들을 사용하는 방법을 사용하여 UITextViewDelegate프로토콜의 shouldChangeTextIn. 텍스트뷰안의 텍스트의 변화를 감지하는 메서드 같다. 현재 작성된 스트링의 길이와 개행문자가 나오기까지의 스트링의 길이를 비교하여 개행문자 이전 이라면 bold처리해주고 개행문자 이후라면 볼드처리 해준다. 비슷한 메커니즘으로 데이터베이스에 타이틀과 텍스트를 저장했다.

### UISearchController와 관련된 부분
일단 처음에 서치바를 삽입하는것부터 난관이었는데, 당연히 스토리보드로 서치바를 추가할 생각을 하여 진행해보니 UI가 달라도 너무 달랐다. 잘 찾아서 largetitle도 적용하고 네비게이션바에 서치컨트롤러를 삽입하는 걸 알아냈고 적용하였을때 UI가 예뻐서 참 좋았다. 그런데 서치바를 이용하려니 지옥이 따로없었는데. 분명 수업에서 배웠을텐데 하나도 기억이 나지 않아 맨땅에 헤딩도 이런헤딩이 없었다. 기존의 뷰컨트롤러에서 하기보단 새로운 뷰컨트롤러에 작성하는게 깔끔할것 같기도 하고 애플 공식문서에서도 안내하는 방법이긴 해서 새로운 뷰컨트롤러를 만들어 접근했다. SearchResultsController에 사용될 뷰컨트롤러를 연결시켜주고 SearchController와 연관된 프로토콜의 메서드인 updateSearchResults를 통해 서치바에 글자가 입력될 때마다 변화를 감지해 해당 text를 이용해 연결된 뷰컨트롤러에 데이터를 전달하는 식이다. 그러면 데이터를 받은 뷰컨트롤러가 서치바 아래에 표시가 되는식인데 여기에 시간을 제일 많이 쏟았다. updateSearchResults 메서드에선 서치바의 텍스트가 변할때마다 해당 텍스트를 realm을 활용한 데이터베이스에 필터링을 해서 필터링 된 데이터베이스를(Results<...>) 새로운 뷰컨트롤러에 전달해주고 뷰컨트롤러는 해당 데이터를 받아서 테이블뷰에 보여주는식이다. 이게 처음엔 잘 안됐는데 왜 잘 안됐는지 기억이 안난다. 그리고 고비를 넘겼나 했더니 해당 테이블뷰의 셀들을 클릭했을때 수정을 할 수 있게 메모를 작성하는 뷰컨트롤러로 넘어가게 해주는 기능을 만드는데에도 고생했다. pushViewController로 이동하려 했는데 아무리 해도 안되서 찾아보니 대충 안되는 이유는 현재 보이는 뷰는 서치컨트롤러를 통해 일종의 소환된(?) 뷰이기 때문에 지금 뷰에서는 다른뷰로 이동할수 없는 상태인 것이다. 엄밀히 따지면 서치중에 보이는 화면은 서치컨트롤러를 단 메인뷰이니 테이블뷰를 보여주는 뷰컨트롤러에서 다른 뷰를 푸쉬하니 안되는 것이다. 이렇게 이해를 했다. 그래서 찾은 방법은 테이블뷰를 보여주는 뷰컨트롤러에 메인뷰컨트롤러를 담는 프로퍼티를 생성하고 해당 프로퍼티를 이용하여 푸쉬해주는 식으로 해결했다.

##과제 제출 후 수정

### 다크모드와 라이트모드에 대응
억지로 다크모드처럼 만드려니 영 마음에 안들어서 다크모드에 대해 찾아보던중 https://developer.apple.com/videos/play/wwdc2019/214/ WWDC자료를 봤는데 내가 얼마나 무지했는지.. 그동안 어떤짓을 한건지 알게되었다. 다이내믹칼라 별거 없었다. 애플에서 친절히 만들어준 UIColor를 이용해서 systemBackground, secondary.... label.. secondaryLabel... 등등 사용하여 칼라를 바꿔주었다. 그런데 실제 아이폰 메모앱과는 불편한 차이가 있었는데 다시 고군분투 해보니 systemGroupedBackground 칼라가 테이블뷰와 같이 그룹으로 묶인 컨텐츠를 위해 존재한다는것을 알아 이대로 해줬더니 너무 깔끔하게 아이폰 메모앱과 같은 칼라를 보여주었다. 그리고 WWDC자료에서 알려준것처럼 NSAttributedString을 사용할때는 기본설정값이 .black으로 되어있기 때문에 이부분도 명시를 해주어야 했다. 네비게이션이나 서치바같은 경우는 따로 지정을 안해주어도 알아서 설정이 되었다. 마지막으로 네비게이션바가 실제 메모앱처럼 백그라운드와 하나되게 설정하고 싶었는데 UIBarAppearance의 configureWithTransparentBackround 메서드를 통해 해결하였다.
